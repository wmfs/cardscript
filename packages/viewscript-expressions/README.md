# viewscript-expressions

[![Known Vulnerabilities](https://snyk.io/test/github/wmfs/viewscript/badge.svg?targetFile=packages%2Fviewscript-cleaner%2Fpackage.json)](https://snyk.io/test/github/wmfs/viewscript?targetFile=packages%2Fviewscript-doc-generator%2Fpackage.json)

> viewscript-expressions provides a number of utilities to generate expressions, generate AST's, and clean viewscript data for submissions

## <a name="install"></a>Install
```bash
$ npm install viewscript-expressions --save
```

## <a name="usage"></a>Usage
```bash
const expressions = new ViewscriptExpressions()
```

##### Method summary

| Usage      | Description |
| -----------      | ----------- |
| `const expressionList = getExpressionsFromViewscript(viewscript)` | Takes a viewscript schema and extracts a list of expressions. |
| `convertExpressionsToAst(expressions)`| Takes a list of expressions generated by `getExpressionsFromViewscript()` and amends the generated AST's to an object `asts` available from `expressions.asts` |
| `addViewscript(viewscript)` | A combination of `getExpressionsFromViewscript(viewscript)` and `convertExpressionsToAst(expressions)`, used to generate AST's from viewscript in one function call |
| `const visibilityList = calculateWidgetVisibility(viewscript, data, asts)` | Takes a viewscript schema, submission data, and a list of AST's to generate an object of `{key: boolean}` values representing whether a widget should be visible or not |
| `const clean = cleanData(data, visibilityList)`| Takes submission data and a visibility list generated by `calculateWidgetVisibility` and returns a cleaned data object with values of hidden fields removed |


## <a name="license"></a>License
[GPLv3](https://github.com/wmfs/viewscript/blob/master/LICENSE)
